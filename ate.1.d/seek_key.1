.if \n[include_flag]==0 \{\
.  TH debug 1
.  so macros.1
.\}
.SS SEEK_KEY
.PP
.proto_seek_key
.PP
The
.B seek_key
action sets the value variable to the row index of the first row of
the
.I handle_name
of the key table  whose key field (field number 1) is equal to the
.IR target_value .
.PP
The exit code is 0 if the row is found, 127 if the row is not found.
Other exit codes indicate a usage or other unexpected error.
.PP
.B Sorted Search
.sp -1
.RS 4
.PP
The
.B seek_key
action is a companion action to the
.B make_key
action, which generates a new
.B ate
table whose key fields, derived from a source table, are sorted in
ascending order.
.PP
The default binary search pattern assumes a
.BR make_key -sorted
table.
The binary search successively breaks search ranges into halves,
using the half still containing the
.I target_value
for the each new search range until the
.I target_value
is isolated.
.PP
It is assumed that exact matches are required, but inexact matches
can be allowed by using the
.BR -p
.RI ( "permissive mode" )
option.
When in
.IR "permissive mode" ,
the first row whose key field is equal to or greater than the
.I target_value
will be returned in the value variable.
The
.B permissive mode
allows, for example, a search for rows whose key field begins with
\&'a'.
.PP
.RE
.PP
.B Random-order Search
.sp -1
.RS 4
.PP
The
.B seek_key
action is not restricted to
.BR make_key -generated
tables.
For a table not sorted in ascending key-field order, use the
.B -s
.RI ( "sequential mode" )
option to conduct a linear search from first to the last row of the
table, setting the value variable to the row index of the first
row encountered with matching key field.
.PP
A
.I sequential mode
search requires an exact match, and therefore it ignores the
.I permissive mode
option, if set.
.RE
.PP
.B Options
.sp -1
.RS 4
.arg_handle
.TP
.I target_value
is the string value against which the key values will are to be
compared.
.TP
.B -p
run search in
.BR "permissive mode" ,
which returns the row number in the key table of the first row
whose value is
.B equal to or greater than
the
.IR target_value .
.TP
.B -s
run search in
.BR "sequential mode" ,
visiting each row in table order and returning the row
index of the first perfect match.
This search works for non-sorted tables, comparing the
value of the first field of each row.
.IP
Running in
.B sequential mode
disables the
.B -p
flag.
.TP
.BI "-t " tally_value_name
enables
.BR "tally mode" ,
where each comparison is counted and the total number of
comparisons made in the search are returned in the shell
variable named after the value in the
.I tally_value_name
option.
.arg_return_value "key table row index"
.RE
.PP
See the
.B MAKE_KEY
action and the
.B SEEK_KEY EXAMPLE
below.
