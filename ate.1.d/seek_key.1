.if \n[include_flag]==0 \{\
.  TH debug 1
.  so macros.1
.\}
.SS SEEK_KEY
.PP
.proto_seek_key
.PP
The default
.B seek_key
action performs a binary search of an
.B ate
table whose key field values are in sorted order.
It returns the row index of the matching key table row,  which then
can be used with the
.B get_row
action to retrieve the key row's contents.
.PP
While the
.B make_key
action specifically generates a suitable key table for use with
.BR seek_key ,
any table whose first column is sorted can be used with
.BR seek_key .
.PP
While it is admittedly more tedious, the advantage of returning the
row index rather than the row itself is that consecutive key rows can
be found by retrieving adjacent key rows by incrementing the key row
index value.
.PP
.B Options
.sp -1
.RS 4
.TP
.I key_handle_name
is the name of the handle created by a previous call to
.BR make_key .
.arg_handle
.TP
.I search_value
is the string value against which the key values will are to be
compared.
.TP
.B -d
run in
.BR "debug mode" .
Every comparison will be printed with the compared values and
the result of the comparison.
This feature was developed for confirming proper operation, but may
also have some value for helping developers understand unexpected
search results.
.TP
.B -i
make comparisons in
.BR "integer mode" .
The key values will be converted to integer values before
comparing them.
This option should only be used if all key column values are
integers and are sorted in integer order, especially if the
table was generated by
.B make_key
with the
.B -i
option.
.TP
.B -p
run search in
.BR "permissive mode" ,
which returns the row number in the key table of the first row
whose value is
.B equal to or greater than
the
.IR search_value .
.TP
.B -s
run search in
.BR "sequential mode" ,
visiting each row in table order and returning the row
index of the first perfect match.
This search works for non-sorted tables, comparing the
value of the first field of each row.
.IP
Running in
.B sequential mode
disables the
.B -p
flag.
.TP
.BI "-t " tally_value_name
enables
.BR "tally mode" ,
where each comparison is counted and the total number of
comparisons made in the search are returned in the shell
variable named after the value in the
.I tally_value_name
option.
.arg_return_value "key table row index"
.RE
.PP
See the
.B MAKE_KEY
action and the
.B SEEK_KEY EXAMPLE
below.
