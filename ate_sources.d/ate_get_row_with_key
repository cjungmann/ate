# -*- mode:shell-script; sh-shell:bash -*-
# shellcheck shell=bash

#> ate_get_row_with_key return_array_name key_table_name data_table_name search_string

ate_get_row_with_key()
{
    local return_row="$1"
    local key_table="$2"
    local data_table="$3"
    local search="$4"

    local -i output key_index
    ate seek_key "$key_table" "$search" -o output -v key_index
    if [ "$output" -eq 1 ]; then
        if ate get_row "$key_table" "$key_index"; then
            if ate get_row "$data_table" "${ATE_ARRAY[1]}" -a "$return_row"; then
                return 0
            fi
        fi
    fi

    return 1
}
